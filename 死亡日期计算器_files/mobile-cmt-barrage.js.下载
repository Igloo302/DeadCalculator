!function(){function e(e){return"[object Function]"===Object.prototype.toString.call(e)}function t(t,n,o){if(a[t])throw new Error("Module "+t+" has been defined already.");e(n)&&(o=n),a[t]={factory:o,inited:!1,exports:null}}function n(t){var n,i,r,s;if(n=a[t],i={},r={exports:{}},!e(n.factory))throw new Error("Module "+t+" has no factory.");if(s=n.factory.call(void 0,o,i,r),void 0!==s)n.exports=s;else if(r.hasOwnProperty("exports")&&"object"==typeof r.exports&&r.exports instanceof Object==!0){var m,c=!1;for(m in r.exports)r.exports.hasOwnProperty(m)&&(c=!0);c===!1?n.exports=i:n.exports=r.exports}else n.exports=r.exports;n.inited=!0}function o(e){var t;if(t=a[e],!t)throw new Error("Module "+e+" is not defined.");return t.inited===!1&&n(e),t.exports}var a={};t("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/mobile-cmt-barrage.js",function(e,t,n){window.changyan.api.ready(function(t){function n(e){a.ajax({url:t.getConfig("protocol")+"changyan.sohu.com/api/2/topic/comments",dataType:"jsonp",jsonp:"callback",scriptCharset:"utf-8",cache:!1,data:{client_id:t.getFeConfig("appid"),page_size:30,topic_id:t.getTopicId(),page_no:1},success:function(n){n.error_code?console.log(n.error_msg):3===n.mode||0===n.comments.length?(s=[],e(s)):(n=t.util.UrlSwitchHttps(n),s=n.comments,s.length<4&&(s=[]),i.each(s,function(e,n){var o=e.content;e.content=t.util.formatContent(o)}),s=l.concat(s),e(s))}})}function o(){var e=a(window);e.on("scroll",function(){var t=a("#SOHUCS #SOHU_MAIN .module-mobile-cmt-list");if(t.length){var n=t.offset().top,o=t.offset().top+t.height();n-e.height()-100<e.scrollTop()&&e.scrollTop()<o+100?c.barrageSwitch("close"):c.barrageSwitch("open")}})}var a=t.util.jquery,i=t.util._,r=(t.util.velocityjs,"true"===t.getBeConfig("mobile_allow_barrage")||"true"===t.getBeConfig("barrageSwitch"));if(r){var s,m=a("#SOHUCS #SOHU_MAIN"),c=e("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.js"),l=t.getHotCommentList();n(function(e){c.init(m,e),"false"===window.localStorage.getItem("changyan-barrage")&&c.closeBarrage()}),o(),t.event.register("mobile-cmt-barrage","open"),t.event.register("mobile-cmt-barrage","close"),t.event.register("mobile-cmt-barrage","refresh"),t.event.listen("changyan:mobile-cmt-barrage:open",function(){c.openBarrage()}),t.event.listen("changyan:mobile-cmt-barrage:close",function(){c.closeBarrage()}),t.event.listen("changyan:mobile-cmt-barrage:refresh",function(){n(function(e){c.stopBarrage(),c.init(m,e),"false"===window.localStorage.getItem("changyan-barrage")&&c.closeBarrage()})}),t.event.listen("changyan:on-topic-lod",function(){t.events&&t.events.onTopicLoad&&i.isFunction(t.events.onTopicLoad)===!0&&t.events.onTopicLoad()})}})}),t("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.js",function(e,t,n){window.changyan.api.ready(function(t){var o=t.util.jquery,a=(t.util._,t.util.velocityjs);!function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var o=(new Date).getTime(),a=Math.max(0,16.7-(o-e)),i=window.setTimeout(function(){t(o+a)},a);return e=o+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var i,r,s,m="open",c=!1,l=!1,d=0,g=!1,u=function(e){i&&("open"!==e||c?"close"===e&&(i.css({visibility:"hidden"}),this.status="close"):(i.css({visibility:"visible"}),this.status="open"))},p=function(){c=!0,u("close")},h=function(){c=!1,u("open")},b=function(e){l=!0,r=e},v=function(e){b(function(){s=e,l=!1,d=0})},w=function(){g=!0},f=function(t,n,m){var c={barrageNum:3,interval:12,speed:1,disappearTime:40};if(arguments.length<2)return void console.log(new error("参数不够！"));if("[object Array]"!==Object.prototype.toString.call(n)||0===n.length)return o('div[node-type="mobile-cmt-barrage"]').remove(),void(g=!1);2===arguments.length&&(m=c),e("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.css");var u=e("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.html.js"),p=o('<div node-type="mobile-cmt-barrage" class="module-mobile-cmt-barrage" style="position: fixed;top: 0;right: 0;"></div>');t.append(p),i=p;var h=m.barrageNum||c.barrageNum,b=m.interval||c.interval,v=m.speed||c.speed,w=m.disappearTime||c.disappearTime,f=0,y=[],A=0,B=!1,S=1,x=n.length;l=!1,s=n;var _=function(){var e,t=function(){tempHtml=a.render(u,{data:s[d]}),p.append(tempHtml),$domList=p.children(),f=$domList.length,y.push(0),d++,d>=x&&(d-=x)};for(0>=f&&t(),e=0;f>e;e++)y[e]+=1,$domList.eq(e).css({y:-y[e]*v});B&&(S-=1/w,$domList.eq(0).css({opacity:S}),0>=S&&(B=!1,S=1,$domList.eq(0).remove(),y.shift(),f--,$domList=p.children(),$domList.length<=0&&r()));var n=y[f-1];n===b&&(A=Number($domList.eq(f-1).css("height").slice(0,-2))),(f>=h||l)&&n>=A/v+b-w-5&&(B=!0),n>A/v+b&&!l&&t(),g!==!0?requestAnimationFrame(_):(p.remove(),g=!1)};window.requestAnimationFrame(_)},y={barrageSwitch:u,init:f,status:m,closeBarrage:p,openBarrage:h,refreshBarrage:v,stopBarrage:w};n.exports=y})}),t("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.css",function(e,t,n){var o=decodeURIComponent("%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%7Bz-index%3A1%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%7Bheight%3Aauto%3Bposition%3Afixed%3Btop%3A16.666666667em%3Bright%3A1em%3Bmax-height%3A7.333333333em%3Bborder-radius%3A1.166666667em%3Bbackground-color%3Argba(0%2C0%2C0%2C.5)%3Btransform%3AtranslateZ(0)%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%20.portrait%7Bheight%3A2.25em%3Bwidth%3A2.25em%3Bdisplay%3Ablock%3Bmargin%3A.166666667em%20.5em%20.083333333em%20.166666667em%3Bborder-radius%3A2.25em%3Bfloat%3Aleft%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%20.danmu-cmt%7Bwhite-space%3Anormal%3Bmax-width%3A16em%3Bmax-height%3A4.538461538em%3Bline-height%3A1.538461538em%3Bdisplay%3Ablock%3Bfont-size%3A1.0833333333333333em%3Boverflow%3Ahidden%3Bcolor%3A%23fff%3Bpadding-right%3A.384615385em%3Bmargin%3A.461538462em%20.083333333em%7D"),a=window.document,i=a.createElement("style");i.id="seaJs-css",i.setAttribute("type","text/css");var r=a.getElementById("seaJs-css");r?a.all?r.styleSheet.cssText+=o:r.textContent+=o:a.all?(i.styleSheet.cssText=o,a.getElementsByTagName("head").item(0).appendChild(i)):(i.innerHTML=o,a.getElementsByTagName("head").item(0).appendChild(i))}),t("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.html.js",function(e,t,n){"use strict";var o;return o=[],o.push('<div class="danmu-wrap">'),o.push('    <img class="portrait" src="$!{data.passport.img_url}"></img>'),o.push('    <span class="danmu-cmt">$!{data.content}</span>'),o.push("</div>"),o.join("\n")}),n("/Users/yanhao/.nvm/versions/node/v6.9.2/lib/node_modules/mdevp/cache/www/mobile-cmt-barrage/mobile-cmt-barrage.js")}();